'use strict';

const React = require('react');

const {
  Text,
  Box
} = require('ink');

const importJsx = require('import-jsx');

const gltfjsx = require('../gltfjsx');

const ErrorBoundary = importJsx('./ErrorBoundary');

function Conversion({
  file,
  ...config
}) {
  let nameExt = file.match(/[-_\w]+[.][\w]+$/i)[0];
  let name = nameExt.split('.').slice(0, -1).join('.');
  let output = name.charAt(0).toUpperCase() + name.slice(1) + (config.types ? '.tsx' : '.js');
  const [done, setDone] = React.useState(false);
  const [log, setLog] = React.useState([]);
  React.useEffect(() => {
    async function run() {
      try {
        await gltfjsx(file, output, { ...config,
          setLog,
          timeout: 0,
          delay: 40
        });
        setDone(true);
      } catch (e) {
        setDone(() => {
          throw e;
        });
      }
    }

    run();
  }, []);
  return /*#__PURE__*/React.createElement(React.Fragment, null, !done && /*#__PURE__*/React.createElement(Box, null, /*#__PURE__*/React.createElement(Text, {
    color: "black",
    backgroundColor: "white"
  }, ' Parse '), /*#__PURE__*/React.createElement(Text, null, " ", (log[log.length - 1] || '').trim())), done && /*#__PURE__*/React.createElement(Box, null, /*#__PURE__*/React.createElement(Text, {
    color: "black",
    backgroundColor: "green"
  }, ' Done: '), /*#__PURE__*/React.createElement(Text, null, " ", output)));
}

module.exports = function App(props) {
  return /*#__PURE__*/React.createElement(ErrorBoundary, null, /*#__PURE__*/React.createElement(Conversion, props));
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkFwcC5qcyJdLCJuYW1lcyI6WyJSZWFjdCIsInJlcXVpcmUiLCJUZXh0IiwiQm94IiwiaW1wb3J0SnN4IiwiZ2x0ZmpzeCIsIkVycm9yQm91bmRhcnkiLCJDb252ZXJzaW9uIiwiZmlsZSIsImNvbmZpZyIsIm5hbWVFeHQiLCJtYXRjaCIsIm5hbWUiLCJzcGxpdCIsInNsaWNlIiwiam9pbiIsIm91dHB1dCIsImNoYXJBdCIsInRvVXBwZXJDYXNlIiwidHlwZXMiLCJkb25lIiwic2V0RG9uZSIsInVzZVN0YXRlIiwibG9nIiwic2V0TG9nIiwidXNlRWZmZWN0IiwicnVuIiwidGltZW91dCIsImRlbGF5IiwiZSIsImxlbmd0aCIsInRyaW0iLCJtb2R1bGUiLCJleHBvcnRzIiwiQXBwIiwicHJvcHMiXSwibWFwcGluZ3MiOiJBQUFBOztBQUNBLE1BQU1BLEtBQUssR0FBR0MsT0FBTyxDQUFDLE9BQUQsQ0FBckI7O0FBQ0EsTUFBTTtBQUFFQyxFQUFBQSxJQUFGO0FBQVFDLEVBQUFBO0FBQVIsSUFBZ0JGLE9BQU8sQ0FBQyxLQUFELENBQTdCOztBQUNBLE1BQU1HLFNBQVMsR0FBR0gsT0FBTyxDQUFDLFlBQUQsQ0FBekI7O0FBQ0EsTUFBTUksT0FBTyxHQUFHSixPQUFPLENBQUMsWUFBRCxDQUF2Qjs7QUFDQSxNQUFNSyxhQUFhLEdBQUdGLFNBQVMsQ0FBQyxpQkFBRCxDQUEvQjs7QUFFQSxTQUFTRyxVQUFULENBQW9CO0FBQUVDLEVBQUFBLElBQUY7QUFBUSxLQUFHQztBQUFYLENBQXBCLEVBQXlDO0FBQ3ZDLE1BQUlDLE9BQU8sR0FBR0YsSUFBSSxDQUFDRyxLQUFMLENBQVcsbUJBQVgsRUFBZ0MsQ0FBaEMsQ0FBZDtBQUNBLE1BQUlDLElBQUksR0FBR0YsT0FBTyxDQUFDRyxLQUFSLENBQWMsR0FBZCxFQUFtQkMsS0FBbkIsQ0FBeUIsQ0FBekIsRUFBNEIsQ0FBQyxDQUE3QixFQUFnQ0MsSUFBaEMsQ0FBcUMsR0FBckMsQ0FBWDtBQUNBLE1BQUlDLE1BQU0sR0FBR0osSUFBSSxDQUFDSyxNQUFMLENBQVksQ0FBWixFQUFlQyxXQUFmLEtBQStCTixJQUFJLENBQUNFLEtBQUwsQ0FBVyxDQUFYLENBQS9CLElBQWdETCxNQUFNLENBQUNVLEtBQVAsR0FBZSxNQUFmLEdBQXdCLEtBQXhFLENBQWI7QUFFQSxRQUFNLENBQUNDLElBQUQsRUFBT0MsT0FBUCxJQUFrQnJCLEtBQUssQ0FBQ3NCLFFBQU4sQ0FBZSxLQUFmLENBQXhCO0FBQ0EsUUFBTSxDQUFDQyxHQUFELEVBQU1DLE1BQU4sSUFBZ0J4QixLQUFLLENBQUNzQixRQUFOLENBQWUsRUFBZixDQUF0QjtBQUVBdEIsRUFBQUEsS0FBSyxDQUFDeUIsU0FBTixDQUFnQixNQUFNO0FBQ3BCLG1CQUFlQyxHQUFmLEdBQXFCO0FBQ25CLFVBQUk7QUFDRixjQUFNckIsT0FBTyxDQUFDRyxJQUFELEVBQU9RLE1BQVAsRUFBZSxFQUFFLEdBQUdQLE1BQUw7QUFBYWUsVUFBQUEsTUFBYjtBQUFxQkcsVUFBQUEsT0FBTyxFQUFFLENBQTlCO0FBQWlDQyxVQUFBQSxLQUFLLEVBQUU7QUFBeEMsU0FBZixDQUFiO0FBQ0FQLFFBQUFBLE9BQU8sQ0FBQyxJQUFELENBQVA7QUFDRCxPQUhELENBR0UsT0FBT1EsQ0FBUCxFQUFVO0FBQ1ZSLFFBQUFBLE9BQU8sQ0FBQyxNQUFNO0FBQ1osZ0JBQU1RLENBQU47QUFDRCxTQUZNLENBQVA7QUFHRDtBQUNGOztBQUNESCxJQUFBQSxHQUFHO0FBQ0osR0FaRCxFQVlHLEVBWkg7QUFjQSxzQkFDRSwwQ0FDRyxDQUFDTixJQUFELGlCQUNDLG9CQUFDLEdBQUQscUJBQ0Usb0JBQUMsSUFBRDtBQUFNLElBQUEsS0FBSyxFQUFDLE9BQVo7QUFBb0IsSUFBQSxlQUFlLEVBQUM7QUFBcEMsS0FDRyxTQURILENBREYsZUFJRSxvQkFBQyxJQUFELGFBQVEsQ0FBQ0csR0FBRyxDQUFDQSxHQUFHLENBQUNPLE1BQUosR0FBYSxDQUFkLENBQUgsSUFBdUIsRUFBeEIsRUFBNEJDLElBQTVCLEVBQVIsQ0FKRixDQUZKLEVBU0dYLElBQUksaUJBQ0gsb0JBQUMsR0FBRCxxQkFDRSxvQkFBQyxJQUFEO0FBQU0sSUFBQSxLQUFLLEVBQUMsT0FBWjtBQUFvQixJQUFBLGVBQWUsRUFBQztBQUFwQyxLQUNHLFNBREgsQ0FERixlQUlFLG9CQUFDLElBQUQsYUFBUUosTUFBUixDQUpGLENBVkosQ0FERjtBQW9CRDs7QUFFRGdCLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQixTQUFTQyxHQUFULENBQWFDLEtBQWIsRUFBb0I7QUFDbkMsc0JBQ0Usb0JBQUMsYUFBRCxxQkFDRSxvQkFBQyxVQUFELEVBQWdCQSxLQUFoQixDQURGLENBREY7QUFLRCxDQU5EIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnXG5jb25zdCBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0JylcbmNvbnN0IHsgVGV4dCwgQm94IH0gPSByZXF1aXJlKCdpbmsnKVxuY29uc3QgaW1wb3J0SnN4ID0gcmVxdWlyZSgnaW1wb3J0LWpzeCcpXG5jb25zdCBnbHRmanN4ID0gcmVxdWlyZSgnLi4vZ2x0ZmpzeCcpXG5jb25zdCBFcnJvckJvdW5kYXJ5ID0gaW1wb3J0SnN4KCcuL0Vycm9yQm91bmRhcnknKVxuXG5mdW5jdGlvbiBDb252ZXJzaW9uKHsgZmlsZSwgLi4uY29uZmlnIH0pIHtcbiAgbGV0IG5hbWVFeHQgPSBmaWxlLm1hdGNoKC9bLV9cXHddK1suXVtcXHddKyQvaSlbMF1cbiAgbGV0IG5hbWUgPSBuYW1lRXh0LnNwbGl0KCcuJykuc2xpY2UoMCwgLTEpLmpvaW4oJy4nKVxuICBsZXQgb3V0cHV0ID0gbmFtZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIG5hbWUuc2xpY2UoMSkgKyAoY29uZmlnLnR5cGVzID8gJy50c3gnIDogJy5qcycpXG5cbiAgY29uc3QgW2RvbmUsIHNldERvbmVdID0gUmVhY3QudXNlU3RhdGUoZmFsc2UpXG4gIGNvbnN0IFtsb2csIHNldExvZ10gPSBSZWFjdC51c2VTdGF0ZShbXSlcblxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGFzeW5jIGZ1bmN0aW9uIHJ1bigpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IGdsdGZqc3goZmlsZSwgb3V0cHV0LCB7IC4uLmNvbmZpZywgc2V0TG9nLCB0aW1lb3V0OiAwLCBkZWxheTogNDAgfSlcbiAgICAgICAgc2V0RG9uZSh0cnVlKVxuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBzZXREb25lKCgpID0+IHtcbiAgICAgICAgICB0aHJvdyBlXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuICAgIHJ1bigpXG4gIH0sIFtdKVxuXG4gIHJldHVybiAoXG4gICAgPD5cbiAgICAgIHshZG9uZSAmJiAoXG4gICAgICAgIDxCb3g+XG4gICAgICAgICAgPFRleHQgY29sb3I9XCJibGFja1wiIGJhY2tncm91bmRDb2xvcj1cIndoaXRlXCI+XG4gICAgICAgICAgICB7JyBQYXJzZSAnfVxuICAgICAgICAgIDwvVGV4dD5cbiAgICAgICAgICA8VGV4dD4geyhsb2dbbG9nLmxlbmd0aCAtIDFdIHx8ICcnKS50cmltKCl9PC9UZXh0PlxuICAgICAgICA8L0JveD5cbiAgICAgICl9XG4gICAgICB7ZG9uZSAmJiAoXG4gICAgICAgIDxCb3g+XG4gICAgICAgICAgPFRleHQgY29sb3I9XCJibGFja1wiIGJhY2tncm91bmRDb2xvcj1cImdyZWVuXCI+XG4gICAgICAgICAgICB7JyBEb25lOiAnfVxuICAgICAgICAgIDwvVGV4dD5cbiAgICAgICAgICA8VGV4dD4ge291dHB1dH08L1RleHQ+XG4gICAgICAgIDwvQm94PlxuICAgICAgKX1cbiAgICA8Lz5cbiAgKVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIEFwcChwcm9wcykge1xuICByZXR1cm4gKFxuICAgIDxFcnJvckJvdW5kYXJ5PlxuICAgICAgPENvbnZlcnNpb24gey4uLnByb3BzfSAvPlxuICAgIDwvRXJyb3JCb3VuZGFyeT5cbiAgKVxufVxuIl19